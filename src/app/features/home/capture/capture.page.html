<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button routerLink="transactions">
        <ion-icon name="file-tray-full-outline" slot="icon-only"></ion-icon>
      </ion-button>
      <ion-button routerLink="inbox"
        ><ion-icon name="mail-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<super-tabs *transloco="let t">
  <super-tabs-toolbar slot="top">
    <super-tab-button>
      <ion-label color="light">{{ t('capture') }}</ion-label>
    </super-tab-button>
    <super-tab-button>
      <ion-label color="light">{{ t('postCapture') }}</ion-label>
    </super-tab-button>
  </super-tabs-toolbar>
  <super-tabs-container>
    <super-tab>
      <ion-content>
        <ion-refresher
          (ionRefresh)="refreshCaptures($event, capturesInfiniteScroll)"
          slot="fixed"
        >
          <ion-refresher-content></ion-refresher-content>
        </ion-refresher>
        <app-no-data
          *ngIf="
            (isFetching$ | async) === false && (captures$ | async)?.length === 0
          "
        ></app-no-data>
        <ion-grid class="capture-tab">
          <ion-row>
            <ion-col
              *ngFor="let item of captures$ | async; trackBy: trackById"
              size="4"
            >
              <app-capture-item
                [item]="item"
                [routerLink]="item.id ? ['asset', { id: item.id }] : undefined"
              >
              </app-capture-item>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-infinite-scroll
          #capturesInfiniteScroll
          (ionInfinite)="loadCaptures($event)"
          threshold="10px"
        >
          <ion-infinite-scroll-content></ion-infinite-scroll-content>
        </ion-infinite-scroll>
        <ion-fab vertical="bottom" horizontal="end" slot="fixed">
          <ion-fab-button (click)="capture()">
            <ion-icon name="camera-outline"></ion-icon>
          </ion-fab-button>
        </ion-fab>
      </ion-content>
    </super-tab>
    <super-tab>
      <ion-content>
        <ion-refresher
          (ionRefresh)="refreshPostCaptures($event, postCapturesInfiniteScroll)"
          slot="fixed"
        >
          <ion-refresher-content></ion-refresher-content>
        </ion-refresher>
        <app-no-data
          *ngIf="
            (isFetching$ | async) === false &&
            (postCaptures$ | async)?.length === 0
          "
        ></app-no-data>
        <app-post-capture
          *ngFor="let transaction of postCaptures$ | async; trackBy: trackById"
          [transaction]="transaction"
          class="ion-margin-bottom"
        ></app-post-capture>
        <ion-infinite-scroll
          #postCapturesInfiniteScroll
          (ionInfinite)="loadPostCaptures($event)"
          threshold="10px"
        >
          <ion-infinite-scroll-content></ion-infinite-scroll-content>
        </ion-infinite-scroll>
      </ion-content>
    </super-tab>
  </super-tabs-container>
</super-tabs>
